{% extends "layouts/base.html" %}

{% block title %} Dashboard {% endblock %} 


{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

<!-- social responsibility -->

<br>

<center>

    <h1> Advocacy and Education </h1>
    <div class = "row">
        
        {% for article in articles %}
            <div class="card" style="width: 18rem; margin-left: auto; margin-right: auto">
                <!-- {{article.image_url}} -->
                {% if article.image_url == None %}
                <img src="https://www.myeducationadvocate.com/wp-content/uploads/2018/11/myeducationadvocate-logo-e1541376173390.png" class="card-img-top" >
                {% else %}
                <img src="{{ article.image_url }}" class="card-img-top" >
                {% endif %}
    
                <div class="card-body">
                <div style="display: flex; flex-direction: row">
                    <h5 class="card-title" style = "font-size:15px; text-align: left;">{{ article.title }}</h5>
                    <br>
                    
                    <!-- <div style="
                    width: 30px;
                    height: 20px;
                    margin-left: 10px;
                    border-radius: 50%;
                    "></div> -->
                </div>
                {% if article.creator.0 == None %}
                <h5 class="card-title" style = "font-size:15px; text-align: left;"> Author: N/A</h5>
                {% else %}
                <h5 class="card-title" style = "font-size:15px; text-align: left;"> Author: {{ article.creator.0 }}</h5>
                {% endif %}
                <!-- <p class="card-text">{{ card.description }}</p> -->
                <a href="{{ article.link }}" class="appendlink" id = "linkbutton" data-article="{{article}}">Link</a>
                <!-- <a href="/command/{{ card.id }}/delete" class="btn btn-primary">Delete</a> -->
                </div>
            </div>
            <!-- <h5> {{article.title}} </h5> -->
    
        {% endfor %}
    </div>
    


</center>

<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.26.1/axios.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script> 

    $(document).ready(function(e) {   
    $('.appendlink').on('click', function (e) {
        console.log("INSIDE APPEND LINK");
        var data = $(this).data();
        console.log(data);
        $.ajax({              
        
            url: "{% url 'add_user' %}",                    
            data: {
                'article': data.article,   
            },
            success: function (data) {   
            alert("Event Successfully Added to Your Schedule");
            }
            });
        
        });
    }); 

</script>

{% endblock content %}
{% block javascript %} 
{% endblock %}
