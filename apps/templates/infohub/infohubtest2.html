{% extends "layouts/base.html" %}

{% block title %} Dashboard {% endblock %} 


{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

<!-- social responsibility -->

<br>

<center>

    <h1> Social Responsibility </h1>
    <div class = "row">
        
        {% for article in articles %}
            <div class="card" style="width: 18rem; margin-left: auto; margin-right: auto">
                <!-- {{article.image_url}} -->
                {% if article.urlToImage == None %}
                <img src="https://blueandgreentomorrow.com/wp-content/uploads/2019/02/Social-Responsible-business-1000x600.jpg" class="card-img-top" >
                {% else %}
                <img src="{{ article.urlToImage }}" class="card-img-top" >
                {% endif %}
    
                <div class="card-body">
                <div style="display: flex; flex-direction: row">
                    <h5 class="card-title" style = "font-size:15px; text-align: left;">{{ article.title }}</h5>
                    <br>
                    
                    <!-- <div style="
                    width: 30px;
                    height: 20px;
                    margin-left: 10px;
                    border-radius: 50%;
                    "></div> -->
                </div>
                {% if article.source.name == None %}
                <h5 class="card-title" style = "font-size:15px; text-align: left;"> Source: N/A</h5>
                {% else %}
                <h5 class="card-title" style = "font-size:15px; text-align: left;"> Source: {{ article.source.name }}</h5>
                {% endif %}
                <!-- <p class="card-text">{{ card.description }}</p> -->
                <a href="{{article.url}}" class="appendlink" id = "linkbutton" data-articlelink="{{article.url}}" data-article="{{article.title}}">Link</a>
                <!-- <a href="/command/{{ card.id }}/delete" class="btn btn-primary">Delete</a> -->
                </div>
            </div>
            <!-- <h5> {{article.title}} </h5> -->
    
        {% endfor %}
    </div>
    


</center>

<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.26.1/axios.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script> 

$(document).ready(function(e) {   
    $('.appendlink').on('click', function (e) {
        console.log("INSIDE APPEND LINK");
        var dict = {};
         
        var data = $(this).data();
        
        console.log(data);
     
        $.ajax({              
        
            url: "{% url 'add_user' %}",                    
            data: {
                'article': data
            },
            success: function (data) {   
            
            }
            });
        
        });
    });
</script>

{% endblock content %}
{% block javascript %} 
{% endblock %}
